---
import Input from "../Components/Input.astro";
import BotonSegundo from "../Components/BotonSegundo.astro";
import RadioButton from "../Components/RadioButton.astro";
import LayoutPrincipal from "../layouts/LayoutPrincipal.astro";
import Layoutcontenido5 from "../layouts/Layoutcontenido5.astro";
import SelectBoxArea from "../Components/SelectBoxArea.astro";
import {Prueba} from "../Components/Prueba"
import { useState } from "react";

// Función para obtener las áreas desde la API

const fetchArea = async () => {
    try {
        const response = await fetch("http://localhost:4000/api/area");
        if (!response.ok) {
            throw new Error("Network response was not ok");
        }
        const data = await response.json();
        return data.map((area) => ({ value: area.id, label: area.area })); // Ajustar para incluir ID

    } catch (error) {
        console.error("Error al obtener áreas:", error);
        return [];
    }
}

const area = await fetchArea();
---

<style>
    body {
        font-family: "Nunito Sans", sans-serif;
        font-optical-sizing: auto;
    }

    .relative input {
        padding-right: 2.5rem; /* Añade espacio a la derecha del input para el icono */
    }
    .relative i {
        right: 1rem; /* Ajusta la posición del icono */
    }
    .error-message {
        color: red;
        font-size: 0.875rem; /* Tamaño de fuente pequeño */
        margin-top: -0.5rem; /* Ajusta el margen para alinear mejor con los inputs */
        margin-bottom: 1rem; /* Espacio debajo del mensaje */
        text-align: left; /* Alineación del texto */
        width: 100%; /* Asegura que ocupe todo el ancho del contenedor */
    }
</style>

<LayoutPrincipal title="">
    <Layoutcontenido5 title="Tipos de Area">
        <div class="w-full md:w-1/2">
            <div class="flex flex-col p-[5%] Flex-box space-y-5">

                <!-- <div class="">
                    <Prueba/ client:visible>
                </div> -->

                <div>
                    <SelectBoxArea Text="Seleccione un área" options={area} id="Area"/>
                    <span id="AreaError" class="error-message"></span>
                </div>

                <div>
                    <Input Text="Tipo de Area" placeholder="Ingrese tipo de area" type="text" id="nombreTipoArea"/>
                    <span id="TipoAreaError" class="error-message"></span>
                </div>

                <div class="space-y-4">
                    <h1>Estado:</h1>
                    <div class="flex h-[23px]">
                        <RadioButton Text="Activo" id="estadoActivo" />
                        <RadioButton Text="Inactivo" id="estadoInactivo" />
                    </div>
                    <span id="estadoError" class="error-message"></span>
                </div>

                <div
                    class="flex justify-center items-center sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4 show-modal">
                    <BotonSegundo Text="Guardar" id="guardarBtn" />
                </div>
            </div>
        </div>
        <script src="../js/TiposdeArea.js"></script>
    </Layoutcontenido5>
</LayoutPrincipal>
